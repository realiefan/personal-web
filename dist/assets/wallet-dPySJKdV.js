import"./modulepreload-polyfill-9p4a8sJU.js";document.addEventListener("DOMContentLoaded",()=>{document.getElementById("saveWallet").addEventListener("click",d),document.querySelectorAll(".openWalletButton").forEach(n=>{n.addEventListener("click",w)}),document.getElementById("loginButton").addEventListener("click",r),document.querySelector(".close").addEventListener("click",s),m()});function r(){const t=document.getElementById("walletModal"),a=document.getElementById("walletId"),e=document.getElementById("walletLink"),l=localStorage.getItem("walletData");if(l){const n=JSON.parse(l);a.value=n.walletId,e.value=n.walletLink}else a.value="",e.value="";t.style.display="block"}function s(){const t=document.getElementById("walletModal");t.style.display="none"}function d(){const t=document.getElementById("walletId").value,a=document.getElementById("walletLink").value;if(t&&a){const e={walletId:t,walletLink:a};localStorage.setItem("walletData",JSON.stringify(e)),alert("Wallet details saved!"),s()}else alert("Please enter both Wallet ID and Wallet Link.")}function w(t){const a=localStorage.getItem("walletData");if(a){const e=JSON.parse(a);switch(t){case"boltz":window.location.href=e.walletLink.replace("wallet","boltz");break;case"tipjar":window.location.href=e.walletLink.replace("wallet","tipjar");break;case"connect":window.location.href=e.walletLink.replace("wallet","lndhub");break;case"wallet":window.location.href=e.walletLink.replace("wallet","wallet");break;case"paywall":window.location.href=e.walletLink.replace("wallet","paywall");break;case"market":window.location.href=e.walletLink.replace("wallet","market");break;case"vouchers":window.location.href=e.walletLink.replace("wallet","vouchers");break;case"splitpayments":window.location.href=e.walletLink.replace("wallet","splitpayments");break;case"withdraw":window.location.href=e.walletLink.replace("wallet","withdraw/");break;case"cashu":window.location.href=e.walletLink.replace("wallet","cashu");break}}else alert("No wallet details found. Click on 'Key icon' on (top-right corner) & Save wallet details first.")}document.getElementById("homeButton").addEventListener("click",()=>{window.location.href="/index.html"});async function m(){const t=localStorage.getItem("walletData");if(t){const e=JSON.parse(t).walletId;try{const l=await fetch("https://pay.zapit.live/api/v1/wallet",{method:"GET",headers:{"X-Api-Key":e}});if(l.ok){const{balance:o}=await l.json(),c=Math.floor(o/1e3),i=document.getElementById("walletBalance");i.textContent=c}else console.error("Error fetching wallet balance.");const n=await fetch(`https://pay.zapit.live/api/v1/payments?api-key=${e}`);if(n.ok){const o=await n.json();p(o)}else console.error("Error fetching transactions.")}catch(l){console.error("Error fetching wallet balance and transactions:",l.message)}}else console.error("No wallet details found. Save wallet details first.")}function p(t){const a=document.getElementById("transactions");a.innerHTML="",t.forEach(e=>{const l=document.createElement("div");l.classList.add("transaction");const n=e.amount/1e3,o=n<0?"debit":"credit",c=n<0?"Paid: ":"Received: ";l.innerHTML=`
        <p class="${o}">${c} <strong> ${n>=0?"+":""}${n}</strong></p>
        <p class="time"><strong></strong> ${new Date(e.time*1e3).toLocaleString()}</p>
      `,a.appendChild(l)})}document.getElementById("openIframeButton").addEventListener("click",()=>{const t="https://signup.zapit.live";document.getElementById("iframeModal").style.display="block";const a=document.getElementById("signupIframe");a.src=t,window.addEventListener("message",e=>{if(e.origin===t){const l=e.data,[n,o]=l.split(" ");try{const c={walletId:n,walletLink:o};localStorage.setItem("walletData",JSON.stringify(c))}catch(c){console.error("Error saving to local storage:",c)}}})});lucide.createIcons();
